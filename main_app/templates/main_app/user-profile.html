{% extends "base.html" %}
{% load static %}

{% block head %}
<style>
    body {
        background: #f5f7fa;
        font-family: 'Poppins', sans-serif;
    }

    .profile-container {
        max-width: 800px;
        margin: 4rem auto;
        padding: 2.5rem;
        background: linear-gradient(135deg, #23243a, #2d2f54);
        border-radius: 20px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5);
        color: #f5f5f5;
        text-align: center;
        animation: fadeIn 0.7s ease-in-out;
    }

    .profile-logo {
        width: 300px;
        margin-bottom: 1rem;
        animation: float 3s ease-in-out infinite;
        filter: drop-shadow(0 0 12px rgba(108, 99, 255, 0.7));
    }

    .username {
        font-size: 2.2rem;
        margin: 0.5rem 0;
        color: #fafafa;
    }

    .rank-section {
        margin-top: 2rem;
        background: rgba(108, 99, 255, 0.15);
        padding: 1.5rem;
        border-radius: 15px;
        box-shadow: 0 0 15px rgba(108, 99, 255, 0.25);
    }

    .rank-section img {
        width: 200px;
        height: 200px;
        margin-bottom: 0.8rem;
    }

    .rank-title {
        font-size: 1.6rem;
        font-weight: 600;
        margin-bottom: 0.4rem;
        color: #fff;
    }

    .xp-display {
        font-size: 1.2rem;
        color: #fafafa;
    }



    .achievements-section {
        margin-top: 2.5rem;
        text-align: center;
    }

    .achievements-section h2 {
        font-size: 1.8rem;
        color: #23243a;
        
    }

    .coming-soon {
        font-size: 1.2rem;
        color: #fafafa;
        font-style: italic;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes float {

        0%,
        100% {
            transform: translateY(0);
        }

        50% {
            transform: translateY(-10px);
        }
    }

    .xp-display {
    font-size: 1.2rem;
    color: #ccc;
    margin-bottom: 1.2rem;
  }

  .xp-bar {
    width: 100%;
    height: 20px;
    background: rgba(255,255,255,0.15);
    border-radius: 10px;
    overflow: hidden;
    margin-bottom: 2rem;
  }

  .xp-progress {
    height: 100%;
    background: linear-gradient(90deg, #6c63ff, #38e0e7);
    width: {{ rank_progress }}%;
    transition: width 0.5s ease-in-out;
  }
</style>
{% endblock head %}

{% block content %}
<div class="profile-container">
    <img src="{% static 'main_app/assets/images/taskflow-logo-transparent2.png' %}" alt="TaskFlow Logo"
        class="profile-logo">
    <h1 class="username" style = "font-weight: 100;">Welcome to your Profile, </h1>
    <h1 class="username" style = "margin-top: -20px;">{{ user.username }}...</h1>

    <div class="rank-section">
        {% if profile.rank.title == "S-RANK MASTER: THE SHADOW MONARCH" %}
        <img src="{{ profile.rank.badge_icon.url }}" alt="{{ profile.rank.title }}" style="width:370px">
        <h2 class="rank-title">{{ profile.rank.title }}</h2>
        <p class="xp-display">Total XP: {{ profile.total_xp }}</p>
        <p>Max Rank Achieved,</p>
        <p> You are now the Master of the FlowState!</p>



        {% else %}
        <img src="{{ profile.rank.badge_icon.url }}" alt="{{ profile.rank.title }}">
        <h2 class="rank-title">{{ profile.rank.title }}</h2>
        <p class="xp-display">Total XP: {{ profile.total_xp }}</p>

        <div class="xp-bar">
            <div class="xp-progress"></div>
        </div>

        {% endif %}
    </div>

    <div class="achievements-section">
        <h2>Achievements</h2>
        <p class="coming-soon">Coming Soon... Stay tuned for unlockable achievements and more xp to reach your flow state!</p>
    </div>

</div>
{% endblock content %}